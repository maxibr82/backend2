<style>
  body {
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    background: #000;
    font-family: Arial, sans-serif;
  }
  .reset-container {
    width: 100vw;
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
  }
  .reset-box {
    background: #181818;
    padding: 32px 28px 24px 28px;
    border-radius: 16px;
    box-shadow: 0 4px 32px 0 rgba(0,0,0,0.5);
    width: 400px;
    display: flex;
    flex-direction: column;
    align-items: center;
    animation: fadeInDown 1s;
    position: relative;
  }
  .volver-btn {
    display: block;
    position: absolute;
    left: 18px;
    top: 18px;
    background: #1da81d;
    color: #fff;
    text-decoration: none;
    font-weight: bold;
    font-size: 1em;
    border-radius: 7px;
    padding: 7px 18px;
    transition: background 0.2s, color 0.2s;
  }
  .volver-btn:hover {
    background: #ffa500;
    color: #181818;
  }
  .reset-box h2 {
    color: #ffa500;
    margin-bottom: 20px;
    font-weight: bold;
    text-align: center;
  }
  .reset-box p {
    color: #ccc;
    margin-bottom: 20px;
    text-align: center;
    line-height: 1.5;
  }
  #requestForm {
    width: 100%;
    display: flex;
    flex-direction: column;
    gap: 14px;
  }
  #requestForm input {
    padding: 12px;
    border-radius: 7px;
    border: none;
    background: #222;
    color: #fff;
    font-size: 1em;
    transition: background 0.2s;
  }
  #requestForm input:focus {
    background: #333;
    outline: 2px solid #ffa500;
  }
  #request-btn {
    background: #ffa500;
    color: #181818;
    font-weight: bold;
    border: none;
    border-radius: 7px;
    padding: 12px;
    margin-top: 10px;
    transition: background 0.2s;
    cursor: pointer;
  }
  #request-btn:hover {
    background: #ffb733;
  }
  #request-btn:disabled {
    background: #666;
    cursor: not-allowed;
  }
  #message {
    margin-top: 10px;
    text-align: center;
    font-weight: bold;
    min-height: 20px;
    font-size: 1.1em;
  }
  .success {
    color: #1da81d;
  }
  .error {
    color: #d51515;
  }
  .reset-box a:not(.volver-btn) {
    color: #ffa500;
    margin-top: 18px;
    text-align: center;
    text-decoration: underline;
    font-size: 1em;
    display: block;
    transition: color 0.2s;
  }
  .reset-box a:not(.volver-btn):hover {
    color: #fff;
  }
  @keyframes fadeInDown {
    from { opacity: 0; transform: translateY(-40px);}
    to { opacity: 1; transform: translateY(0);}
  }
  .info-box {
    background: #333;
    border: 1px solid #555;
    border-radius: 8px;
    padding: 15px;
    margin-top: 20px;
    color: #ccc;
    font-size: 0.9em;
  }
  .info-box h4 {
    color: #ffa500;
    margin: 0 0 10px 0;
  }
  .info-box ul {
    margin: 10px 0;
    padding-left: 20px;
  }
  .info-box li {
    margin-bottom: 5px;
  }
</style>

<div class="reset-container">
  <div class="reset-box">
    <a href="/login" class="volver-btn">Volver</a>
    <h2>üîê Recuperar Contrase√±a</h2>
    
    <p>Ingresa tu direcci√≥n de correo electr√≥nico y te enviaremos un enlace para restablecer tu contrase√±a.</p>
    
    <form id="requestForm">
        <input type="email" name="email" placeholder="Tu correo electr√≥nico" required>
        <button type="submit" id="request-btn">Enviar enlace de recuperaci√≥n</button>
    </form>
    
    <div id="message"></div>
    
    <div class="info-box">
      <h4>üìß Informaci√≥n importante:</h4>
      <ul>
        <li>El enlace expirar√° en <strong>1 hora</strong></li>
        <li>Solo puedes usar el enlace una vez</li>
        <li>Revisa tu carpeta de spam</li>
        <li>No podr√°s usar tu contrase√±a anterior</li>
      </ul>
    </div>
    
    <a href="/login">¬øRecordaste tu contrase√±a? Inicia sesi√≥n</a>
  </div>
</div>

<script>
document.getElementById('requestForm').addEventListener('submit', async function(e) {
    e.preventDefault();
    
    const form = e.target;
    const submitBtn = document.getElementById('request-btn');
    const messageDiv = document.getElementById('message');
    
    const email = form.email.value.trim();
    
    if (!email) {
        showMessage('Por favor ingresa tu correo electr√≥nico', 'error');
        return;
    }
    
    // Deshabilitar el bot√≥n durante la petici√≥n
    submitBtn.disabled = true;
    submitBtn.textContent = 'Enviando...';
    
    try {
        const response = await fetch('/api/password-reset/request', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ email })
        });
        
        const result = await response.json();
        
        if (result.status === 'success') {
            showMessage('‚úÖ Si el correo existe en nuestro sistema, recibir√°s un enlace de recuperaci√≥n.', 'success');
            form.reset();
            
            // Mostrar mensaje adicional despu√©s de 3 segundos
            setTimeout(() => {
                showMessage('üìß Revisa tu bandeja de entrada y carpeta de spam.', 'success');
            }, 3000);
            
        } else {
            showMessage(result.message || 'Error al procesar la solicitud', 'error');
        }
        
    } catch (error) {
        console.error('Error:', error);
        showMessage('Error de conexi√≥n. Int√©ntalo de nuevo.', 'error');
    } finally {
        // Rehabilitar el bot√≥n
        submitBtn.disabled = false;
        submitBtn.textContent = 'Enviar enlace de recuperaci√≥n';
    }
});

function showMessage(text, type) {
    const messageDiv = document.getElementById('message');
    messageDiv.textContent = text;
    messageDiv.className = type;
    messageDiv.style.display = 'block';
    
    // Ocultar el mensaje despu√©s de 10 segundos para mensajes de √©xito
    if (type === 'success') {
        setTimeout(() => {
            messageDiv.style.display = 'none';
        }, 10000);
    }
}
</script>
